
function EquipWeapon(ToolSe)
    if game.Players.LocalPlayer.Backpack:FindFirstChild(ToolSe) then
        getgenv().tool = game.Players.LocalPlayer.Backpack:FindFirstChild(ToolSe)
        wait()
        game.Players.LocalPlayer.Character.Humanoid:EquipTool(tool)
    end
end


_G.ColorESP = Color3.new(0,255,255)

function isnil(thing)
    return (thing == nil)
end
local function round(n)
    return math.floor(tonumber(n) + 0.5)
end
Number = math.random(1, 1000000)
function UpdateBfEsp() 
    for i,v in pairs(game:GetService("Workspace"):GetChildren()) do
        pcall(function()
            if DevilFruitESP then
                if string.find(v.Name, "Fruit") then   
                    if not v.Handle:FindFirstChild('NameEsp'..Number) then
                        local bill = Instance.new('BillboardGui',v.Handle)
                        bill.Name = 'NameEsp'..Number
                        bill.ExtentsOffset = Vector3.new(0, 1, 0)
                        bill.Size = UDim2.new(1,200,1,30)
                        bill.Adornee = v.Handle
                        bill.AlwaysOnTop = true
                        local name = Instance.new('TextLabel',bill)
                        name.Font = "GothamBold"
                        name.FontSize = "Size14"
                        name.TextWrapped = true
                        name.Size = UDim2.new(1,0,1,0)
                        name.TextYAlignment = 'Top'
                        name.BackgroundTransparency = 1
                        name.TextStrokeTransparency = 0.5
                        name.TextColor3 = _G.ColorESP
                        name.Text = (v.Name ..' \n'.. round((game:GetService('Players').LocalPlayer.Character.Head.Position - v.Handle.Position).Magnitude/3) ..' M')
                    else
                        v.Handle['NameEsp'..Number].TextLabel.Text = (v.Name ..'   \n'.. round((game:GetService('Players').LocalPlayer.Character.Head.Position - v.Handle.Position).Magnitude/3) ..' M')
                    end
                end
            else
                if v.Handle:FindFirstChild('NameEsp'..Number) then
                    v.Handle:FindFirstChild('NameEsp'..Number):Destroy()
                end
            end
        end)
    end
end

function isnil(thing)
    return (thing == nil)
end
local function round(n)
    return math.floor(tonumber(n) + 0.5)
end
Number = math.random(1, 1000000)
function UpdateDBEsp() 
    for i,v in pairs(game:GetService("Workspace"):GetChildren()) do
        pcall(function()
            if DragonBallESP then
                if string.find(v.Name, "DB1") or string.find(v.Name, "DB2") or string.find(v.Name, "DB3") or string.find(v.Name, "DB4") or string.find(v.Name, "DB5") or string.find(v.Name, "DB6") or string.find(v.Name, "DB7") then   
                    if not v.Handle:FindFirstChild('NameEsp'..Number) then
                        local bill = Instance.new('BillboardGui',v.Handle)
                        bill.Name = 'NameEsp'..Number
                        bill.ExtentsOffset = Vector3.new(0, 1, 0)
                        bill.Size = UDim2.new(1,200,1,30)
                        bill.Adornee = v.Handle
                        bill.AlwaysOnTop = true
                        local name = Instance.new('TextLabel',bill)
                        name.Font = "GothamBold"
                        name.FontSize = "Size14"
                        name.TextWrapped = true
                        name.Size = UDim2.new(1,0,1,0)
                        name.TextYAlignment = 'Top'
                        name.BackgroundTransparency = 1
                        name.TextStrokeTransparency = 0.5
                        name.TextColor3 = _G.ColorESP
                        name.Text = (v.Name ..' \n'.. round((game:GetService('Players').LocalPlayer.Character.Head.Position - v.Handle.Position).Magnitude/3) ..' M')
                    else
                        v.Handle['NameEsp'..Number].TextLabel.Text = (v.Name ..'   \n'.. round((game:GetService('Players').LocalPlayer.Character.Head.Position - v.Handle.Position).Magnitude/3) ..' M')
                    end
                end
            else
                if v.Handle:FindFirstChild('NameEsp'..Number) then
                    v.Handle:FindFirstChild('NameEsp'..Number):Destroy()
                end
            end
        end)
    end
end

function UnEquipWeapon(ToolSess)
    if game.Players.LocalPlayer.Character:FindFirstChild(ToolSess) then
        getgenv().toolun = game.Players.LocalPlayer.Character:FindFirstChild(ToolSess)
        wait()
        game.Players.LocalPlayer.Character.Humanoid:UnequipTools(toolun)
    end
end

spawn(function() 
    while wait(2) do SaveSettings() end
end)

local Weaponlist = {}

function Update()
    for i,v in pairs(game:GetService("Players").LocalPlayer.Backpack:GetChildren()) do
        if v:IsA("Tool") then
            table.insert(Weaponlist,v.Name)
        end
    end

    for i,v in pairs(game:GetService("Players").LocalPlayer.Character:GetChildren()) do
        if v:IsA("Tool") then
            table.insert(Weaponlist,v.Name)
        end
    end
end

Update()


function GetZenoClick(zeno) 
    for k,v in pairs(zeno:GetDescendants()) do 
        if v:FindFirstChild("ProximityPrompt") then return v end
    end
end

local plr = game.Players.LocalPlayer
function GetQuestLevel(quest) 
    local ret = (string.gsub(quest, "%D", ""))
    return tonumber(ret)
end

function CheckMobLevel(mob,level) 
    if mob:FindFirstChild("Data") then
        if mob.Data.Num.Value == level then 
            return true 
        end
    end
end

function CheckMob(mob,nocheckhelth) 
    if not mob.Parent then return false end
    if not mob:FindFirstChild("HumanoidRootPart") then return false end
    if not mob:FindFirstChild("Humanoid") then return false end
    if not mob:FindFirstChild("Head") then return false end
    if not mob:FindFirstChild("Data") then return false end
    if not nocheckhelth then 
        if mob.Humanoid.Health == 0 then return false end
    end
    return true
end

function GetQuestNum(quest) 
    for _,v in pairs(quest:GetChildren()) do
        if v.Name == "ClickPart" then
            if v.Num then
                num = v.Num.Value
                return tonumber(num)
            end
        end
    end
end
local FarmList = {}
local FarmListIndex = {}
local IndexLevel = {}

if game.Workspace:FindFirstChild("QuestFolder") then 
    for k,v in pairs(game:GetService("Workspace").QuestFolder:GetChildren()) do 
        local lv = GetQuestLevel(v.Name)
        local nm = GetQuestNum(v)
        FarmList[lv] = {
            Num = nm,
            Quest = v,
            Level = lv
        }
    end
    local function Com(a, b)
        return a < b
    end
    for k in pairs(FarmList) do
        table.insert(FarmListIndex, k)
    end
    table.sort(FarmListIndex, Com)

    for _, k in ipairs(FarmListIndex) do
        table.insert(IndexLevel,k)
    end
end

function ClickButton(v)
    v.BackgroundTransparency = 1
    v.Size = UDim2.new(100, 100, 100, 100)
    v.Position = UDim2.new(-1, 0, -5, 0)
    wait(.2)
    game:GetService("VirtualUser"):ClickButton1(Vector2.new(50, 50))
end

function QuayNgang(pos,quaylen) 
    if quaylen then 
        return CFrame.new(pos.Position)*CFrame.Angles(math.rad(90),0,0)
    end
    return CFrame.new(pos.Position)*CFrame.Angles(math.rad(-90),0,0)
end

function CheckLevel() 
    local level = plr.Data.Levels.Value
    local index = math.huge
    local questchecker
    for _, i in ipairs(FarmListIndex) do
        local v = FarmList[k]
        if (level - i) >= 0 then
            if (level - i) < math.abs(level - index) then
                index = i
            end
        end
    end   
    return FarmList[index]
end

function Teleport(pos) 
    if not plr.Character then 
        return
    end
    if not plr.Character:FindFirstChild("HumanoidRootPart") then return end
    plr.Character.HumanoidRootPart.CFrame = pos
end

_G.Color = Color3.fromRGB(255,0,255)
_G.Logo = 18685184623
wait(0.1)

local Evil = loadstring(game:HttpGet("https://raw.githubusercontent.com/x2duck/gui-/main/sillyhubfreegui.lua"))()
local Win = library:Evil("ArDark","",_G.Logo )
local Weapon = nil
local tab1 = Win:CraftTab('Main')
local tab2 = Win:CraftTab('Misc')
local tab3 = Win:CraftTab('Teleport')
local tab4 = Win:CraftTab('Raid')
local tab5 = Win:CraftTab('Sea Best')
local page1 = tab1:CraftPage('Main',1)

page1:Toggle('Auto Farm Level',false,function(value)
    Farm = value
end)

local page2 = tab1:CraftPage('Config',2)

page2:Dropdown("Select Weapon",Weaponlist,"",function(a)
    Weapon = a
end)

page2:Dropdown("Select Method Farm",{"Normal","Fast"},"Normal",function(a)
    Method = a
end)

spawn(function()
    while wait() do
        pcall(function()
            if Settings.FarmrDUMA then
                if game.Players.LocalPlayer.Character.Humanoid.Health > game.Players.LocalPlayer.Character.Humanoid.MaxHealth / 100 * Settings.SaveAt then 
                    Farmr = true
                    AutoSaveModeDungeon = false
                else
                    Farmr = false
                    AutoSaveModeDungeon = true
                end
            else
                Farmr = false
                AutoSaveModeDungeon = false
            end
        end)
    end
end)

spawn(function()
    while wait() do
        if Settings.FarmrDUMA and AutoSaveModeDungeon then
            pcall(function()
                if game.PlaceId == 13373351184 then
                    if game.Players.LocalPlayer.Character.Humanoid.Health <= game.Players.LocalPlayer.Character.Humanoid.MaxHealth / 100 * Settings.SaveAt then                                                     
                        repeat task.wait()
                            TP(CFrame.new(606.5416259765625, 254.0508575439453, 126.32906341552734))
                            Fast = false
                            UnEquipWeapon()
                        until game.Players.LocalPlayer.Character.Humanoid.Health == game.Players.LocalPlayer.Character.Humanoid.MaxHealth or not AutoSaveModeDungeon or not Settings.FarmrDUMA
                    end
                end
            end)
        end
    end
end)

spawn(function()
    while wait() do
        if Farmr then
            if game.PlaceId == 10464237910 then 
                Teleport(CFrame.new(game:GetService("Workspace")["5 Player"].Gate.Gate.Position))
            elseif game.PlaceId == 13373351184 then
                pcall(function()
                    if game:GetService("Workspace"):FindFirstChild("Zeno") then
                        UnEquipWeapon()
                        if plr.PlayerGui:FindFirstChild("WishGui") then 
                            if Settings.Reward == "Random" then 
                                dimemayy = math.random(1,5)
                                if dimemayy == 1 then 
                                    Settings.Reward = "Beli" 
                                elseif dimemayy == 2 then 
                                    Settings.Reward = "Gem" 
                                elseif dimemayy == 3 then 
                                    Settings.Reward = "Unlock" 
                                elseif dimemayy == 4 then 
                                    Settings.Reward = "Ruby" 
                                elseif dimemayy == 5 then 
                                    Settings.Reward = "Dragon" 
                                end
                            end
                            if Settings.Reward == "Beli" then 
                                ClickButton(plr.PlayerGui.WishGui.Frame.Wish1)
                            elseif Settings.Reward == "Gem" then
                                ClickButton(plr.PlayerGui.WishGui.Frame.Wish2)
                            elseif Settings.Reward == "Unlock" then
                                ClickButton(plr.PlayerGui.WishGui.Frame.Wish3)
                            elseif Settings.Reward == "Ruby" then
                                ClickButton(plr.PlayerGui.WishGui.Frame.Wish4)
                            elseif Settings.Reward == "Dragon Scale" then
                                ClickButton(plr.PlayerGui.WishGui.Frame.Wish5)
                            end
                        else
                            local ZenoClick = GetZenoClick(game:GetService("Workspace").Zeno)
                            if ZenoClick then 
                                Teleport(CFrame.new(ZenoClick.Position))
                                wait(1)
                                fireproximityprompt(ZenoClick.ProximityPrompt,1)
                                wait(1)
                            end
                        end		
                    end

                    local x = game:GetService("Workspace").SpawnEnemy
                    if x:FindFirstChild("Wave5") then
                        Killaura = false
                        CC = true
                        for i,x in pairs(game:GetService("Workspace").SpawnEnemy:GetDescendants()) do
                            if x.Name == "LastBoss" then
                                if CheckMob(x) then
                                    repeat game:GetService("RunService").Heartbeat:wait()
                                        if Settings.Weapon ~= nil then
                                            if not Settings.AutoMelee and not Settings.AutoSword then
                                                EquipWeapon(Settings.Weapon)
                                            end
                                        end
                                        if Method == "Fast" then
                                            Fast = true 
                                        else
                                            Click()  
                                        end
                                        Teleport(QuayNgang(x.HumanoidRootPart.CFrame+Vector3.new(0,Settings.DistanceMob,0)))
                                        if CheckMob(x) then
                                            x.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Jumping, false)
                                            x.HumanoidRootPart.CanCollide = false
                                        end
                                    until x:FindFirstChild("Humanoid").Health <= 0 or not Farmr or not x.Parent
                                end
                            end
                        end
                    else
                        Fast = false
                        CC = false
                        Killaura = true
                        game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(-68.81217956542969, 138.3164520263672, 40.44826889038086)
                    end
                end)
            end
        else
            CC = false
            Fast = false 
        end
    end
end)

spawn(function()
    while wait() do
        if Farm then
            pcall(function()
                local CurrentFarmData = CheckLevel()
                Teleport(CFrame.new(CurrentFarmData.Quest.ClickPart.Position))
                if plr.Quest.Num.Value == 0 then
                    if not plr.PlayerGui:FindFirstChild("QuestTake") then 
                        fireclickdetector(CurrentFarmData.Quest.ClickPart.ClickDetector,1)
                        wait(1)
                    end
                    if plr.PlayerGui:FindFirstChild("QuestTake") then 
                        ClickButton(plr.PlayerGui.QuestTake.Accept)
                        wait(1)
                    end
                    Fast = false
                elseif plr.Quest.Num.Value == CurrentFarmData.Num and plr.Quest.Num.Value ~= 0 then
                    local hasmob = false
                    for i,x in pairs(game:GetService("Workspace").Npc:GetChildren()) do
                        if CheckMobLevel(x,CurrentFarmData.Num) and CheckMob(x) then 
                            repeat game:GetService("RunService").Heartbeat:wait()
                                hasmob = true
                                if Settings.Weapon ~= nil then
                                    EquipWeapon(Settings.Weapon)
                                else
                                end
                                Click() 
                                Teleport(QuayNgang(x.HumanoidRootPart.CFrame+Vector3.new(0,Settings.DistanceMob,0)))
                            until not CheckMob(x) or not Farm
                        end
                    end
                    if not hasmob then 
                        Teleport(CFrame.new(CurrentFarmData.Quest.ClickPart.Position))
                    end
                elseif plr.Quest.Num.Value ~= CurrentFarmData.Num and plr.Quest.Num.Value ~= 0 then
                    for k,v in pairs(plr.PlayerGui:GetChildren()) do 
                        if v.Name == "QuestBar" then 
                            if v:FindFirstChild("Background") and v.Background:FindFirstChild("Cancle") then 
                                ClickButton(v.Background.Cancle)
                                wait(1)
                            end
                        end
                    end
                end
            end)
        end
    end
end)